---
layout: post
title: Today I Learned
date: 2025-04-02 08:00:00 +0900
description: # My First Post # Add post description (optional)
img: # software.jpg # Add image post (optional)
tags: [TIL] # add tag
---

### 기록

(SQL)


|food_type|favorites|bool|
|:-------:|:-------:|:--:|
|한식|10|true|
|한식|20|false|
|중식|10|true|
|중식|12|true|
|중식|20|false|


A로 GROUP 후 그룹별로 기준에 맞는 행만 표시하기.


윈도우 함수 : 기존 table + 함수 결과 열 추가

    SELECT food_type, rest_id, rest_name, favorites
    FROM (
        SELECT *, ROW_NUMBER() OVER (PARTITION BY food_type ORDER BY favorites DESC) AS rn
        FROM rest_info
        ) AS t
    WHERE rn = 1
    ORDER BY food_type DESC

조건대로 정렬한 후 rn 이라는 새 행을 추가한다.\
이후 1번 행만 모아 표시한다.

EXISTS : (어떤 값이든) 행이 존재하는가?

    SELECT food_type, rest_id, rest_name, favorites
    FROM rest_info AS t1
    WHERE NOT EXISTS (
        SELECT 1
        FROM rest_info AS t2
        WHERE t2.food_type = t1.food_type
        AND t2.favorites > t1.favorites)

t1 테이블을 순회하며 t2의 각 행과 비교한다.\
쉽게 말해 for 중첩이다.

table의 별명인 t1, t2를 사용하는게 햇갈릴 수 있는데,\
for(var t1 : rest_info) 라고 생각하면 편할 것 같다.

WHERE 하는 시점에서 이미 iterator 같은 순회를 돌고 있다.


<br>
<hr>


<hr>
<br>



<br>
<hr>

### 의문


<br>
<hr>

### 회고


